<!doctype  <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Shoe Evalation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="/css/eval_style.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/css/hf_style.css" />
    <script src="/js/form-submission-handler.js"></script>
    <!-- bootstrap CDN -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4"
        crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
        crossorigin="anonymous"></script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.45.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.45.0/mapbox-gl.css' rel='stylesheet' />

    <script src="https://cdn.bootcss.com/popper.js/1.14.3/esm/popper-utils.min.js"></script>
    <script>
        function drawProgress(percent) {
            $('div.prog').html('<div class="percent"></div><div id="slice"' + (percent > 50 ? ' class="gt50"' : '') +
                '><div class="pie"></div>' + (percent > 50 ? '<div class="pie fill"></div>' : '') + '</div>');
            var deg = 360 / 100 * percent;
            $('#slice .pie').css({
                '-moz-transform': 'rotate(' + deg + 'deg)',
                '-webkit-transform': 'rotate(' + deg + 'deg)',
                '-o-transform': 'rotate(' + deg + 'deg)',
                'transform': 'rotate(' + deg + 'deg)'
            });
            $('.percent').html('<p>' + Math.round(percent) + '%</p>');
        }



        $(document).ready(function () {
            $('#prog-contain').click((e) => {
                var percent = 0;
                var l1_selected = findSelect($('.l1')).innerHTML;
                var l2_selected = findSelect($('.l2')).innerHTML; 
                var l3_selected = findSelect($('.l3')).innerHTML;
                var selection = [l1_selected, l2_selected, l3_selected];
                for (var i = 0; i < selection.length; i++) {
                    if (selection[i] == "new") {
                        percent += 33;
                    } else if (selection[i] == "old") {
                        percent += 20;
                    } else {
                        percent += 10;
                    }
                }
                document.getElementById('outsole').value = l1_selected;
                document.getElementById('midsole').value = l2_selected;
                document.getElementById('upper-material').value = l3_selected;
                console.log(document.getElementById('outsole').value);
                console.log(document.getElementById('midsole').value);
                console.log(document.getElementById('upper-material').value);
                drawProgress(percent);
            });

            function findSelect(list) {
                for (var i = 0; i < list.length; i++) {
                    if (list[i].classList.contains('active')) {
                        return list[i];
                    }
                }
            }
        });
    </script>

</head>

<body>

    <%- include header.ejs %>

    <div class="bg">
        <div class="bg-title">
            <h2 class="d-flex p-2 justify-content-center">Start Your Shoes Evaluation</h2>
            <p class="d-flex p-2 justify-content-center">Step1: Choose One Pair Of Shoes You Won't Wear Anymore</p>
            <p class="d-flex p-2 justify-content-center">Step2: Choose The Worn Down Level For Out Sole</p>
            <p class="d-flex p-2 justify-content-center">Step3: Choose The Worn Down Level For Mid Sole</p>
            <p class="d-flex p-2 justify-content-center">Step4: Choose The Worn Down Level For Upper Material</p>
            <p class="d-flex p-2 justify-content-center">Step5: Know How Much Your Old Shoes Worths And Get A Voucher </p>
        </div>

        <div class="select-bar-container">
            <div class="select-bar">
                <div class="row">
                    <div class="pt-5">
                        <div class="row">
                            <!-- tab -->
                            <div class="col-5">
                                <div class="tab-content" id="nav1-tabContent">
                                    <div class="tab-pane fade" id="tab-old1" role="tabpanel" aria-labelledby="list-home-list">
                                        <img src="/images/bottom_old.jpg" class=" border border-dark w-75 h-auto" alt="Cinque Terre"></img>
                                    </div>
                                    <div class="tab-pane fade show active" id="tab-new1" role="tabpanel" aria-labelledby="list-profile-list">
                                        <img src="/images/bottom_new.jpg" class=" border border-dark w-75 h-auto" alt="Cinque Terre"></img>
                                    </div>
                                    <div class="tab-pane fade" id="tab-wearing1" role="tabpanel" aria-labelledby="list-profile-list">
                                        <img src="/images/bottom_wearing.jpg" class=" border border-dark w-75 h-auto" alt="Cinque Terre"></img>
                                    </div>
                                </div>
                            </div>
                            <!-- list -->
                            <div class="col-5 d-flex flex-column">
                                <div class="p-2 mx-auto">
                                    <h3>Out Sole</h3>
                                </div>
                                <div class="p-2 mx-auto">select worn-out level</div>
                                <div class="p-2">
                                    <div class="list-group" id="list-tab" role="tablist">
                                        <a class="l1 list-group-item btn-secondary list-group-item-action" id="list-new1" data-toggle="list" href="#tab-new1" role="tab"
                                            aria-controls="new">new</a>
                                        <a class="l1 list-group-item btn-secondary list-group-item-action" id="list-old1" data-toggle="list" href="#tab-old1" role="tab"
                                            aria-controls="old">old</a>
                                        <a class="l1 list-group-item btn-secondary list-group-item-action" id="list-wearing1" data-toggle="list" href="#tab-wearing1"
                                            role="tab" aria-controls="old">wearing</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pt-5">
                        <div class="row">
                            <!-- tab -->
                            <div class="col-5">
                                <div class="tab-content" id="nav2-tabContent">
                                    <div class="tab-pane fade" id="tab-old2" role="tabpanel" aria-labelledby="list-home-list">
                                        <img src="/images/mid_old.jpg" class="border border-dark w-75 h-auto" alt="Cinque Terre"></img>

                                    </div>
                                    <div class="tab-pane fade show active" id="tab-new2" role="tabpanel" aria-labelledby="list-profile-list">
                                        <img src="/images/mid_new.jpg" class="border border-dark w-75 h-auto" alt="Cinque Terre"></img>
                                    </div>
                                    <div class="tab-pane fade" id="tab-wearing2" role="tabpanel" aria-labelledby="list-profile-list">
                                        <img src="/images/mid_wearing.jpg" class="border border-dark w-75 h-auto" alt="Cinque Terre"></img>
                                    </div>
                                </div>
                            </div>
                            <!-- list -->
                            <div class="col-5 d-flex flex-column">
                                <div class="p-2 mx-auto">
                                    <h3>Mid Sole</h3>
                                </div>
                                <div class="p-2 mx-auto">select worn-out level</div>
                                <div class="p-2">
                                    <div class="list-group" id="list-tab" role="tablist">
                                        <a class="l2 list-group-item btn-secondary list-group-item-action" id="list-new2" data-toggle="list" href="#tab-new2" role="tab"
                                            aria-controls="new">new</a>
                                        <a class="l2 list-group-item btn-secondary list-group-item-action" id="list-old2" data-toggle="list" href="#tab-old2" role="tab"
                                            aria-controls="old">old</a>
                                        <a class="l2 list-group-item btn-secondary list-group-item-action" id="list-old2" data-toggle="list" href="#tab-wearing2"
                                            role="tab" aria-controls="new">wearing</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pt-5">
                        <div class="row">
                            <!-- tab -->
                            <div class="col-5">
                                <div class="tab-content" id="nav3-tabContent">
                                    <div class="tab-pane fade" id="tab-old3" role="tabpanel" aria-labelledby="list-home-list">
                                        <img src="/images/upper_old.jpg" class="border border-dark w-75 h-auto" alt="Cinque Terre"></img>
                                    </div>
                                    <div class="tab-pane fade show active" id="tab-new3" role="tabpanel" aria-labelledby="list-profile-list">
                                        <img src="/images/upper_new.jpg" class=" border border-dark w-75 h-auto" alt="Cinque Terre"></img>
                                    </div>
                                    <div class="tab-pane fade" id="tab-wearing3" role="tabpanel" aria-labelledby="list-profile-list">
                                        <img src="/images/upper_wearing.jpg" class=" border border-dark w-75 h-auto" alt="Cinque Terre"></img>
                                    </div>
                                </div>
                            </div>
                            <!-- list -->
                            <div class="col-5 d-flex flex-column">
                                <div class="p-2 mx-auto">
                                    <h3>Upper Material</h3>
                                </div>
                                <div class="p-2 mx-auto">select worn-out level</div>
                                <div class="p-2">
                                    <div class="">
                                        <div class="list-group" id="list-tab" role="tablist">
                                            <a class="l3 list-group-item btn-secondary list-group-item-action" id="list-old3" data-toggle="list" href="#tab-new3" role="tab"
                                                aria-controls="new">new</a>
                                            <a class="l3 list-group-item btn-secondary list-group-item-action" id="list-new3" data-toggle="list" href="#tab-old3" role="tab"
                                                aria-controls="old">old</a>
                                            <a class="l3 list-group-item btn-secondary list-group-item-action" id="list-wearing3" data-toggle="list" href="#tab-wearing3"
                                                role="tab" aria-controls="new">wearing</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="container">
                        <div class="row eval-container" >
                            <div id="prog-contain">
                                <div class="prog" data-toggle="tooltip" data-placement="top" title="Tooltip on top">
                                </div>
                            </div>
                        </div>

                    </div>
                    <button type="button" class="btn btn-secondary" data-toggle="tooltip" data-placement="top" title="Tooltip on top">
                            Tooltip on top
                    </button>
                    <button type="button" class="btn btn-secondary" data-toggle="tooltip" data-html="true" title="<em>Tooltip</em> <u>with</u> <b>HTML</b>">
                        Tooltip with HTML
                      </button>
                </div>

            </div>

            <h2>Fill in the form and contact US!</h2>
            <div class="grid-contact-info p-5 m-5">
                <form id="gform" method="POST" action="https://script.google.com/macros/s/AKfycbx5UAbngUPvgbUKYhYiGBAwBBd_yFzs0_C5KSki35yxcHBe-3Q/exec">
                    <div class="form-group row">
                        <div class="col m-3">
                            <input name="name" type="text" class="form-control" placeholder="Name">
                        </div>
                        <div class="col m-3">
                            <input name="email" type="email" class="form-control" placeholder="Email">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col m-3">
                            <input name="shoe" type="text" class="form-control" placeholder="Shoe's name">
                        </div>
                        <div class="col m-3">
                            <input name="price" type="number" class="form-control" placeholder="How much did you pay for the shoe">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="notes" class="ml-3">Notes</label>
                        <textarea name="notes" class="m-3 col form-control" id="notes" rows="3"></textarea>
                    </div>
                    <input type="hidden" name="outsole" id="outsole" />
                    <input type="hidden" name="midesole" id="midsole" />
                    <input type="hidden" name="upper-material" id="upper-material" />
                    <div class="row justify-content-center p-5 ">
                        <input id="submit-btn" type="submit" class="p-3 col-4 btn btn-secondary btn-lg btn-block" value="SUBMIT" id="submit" />
                    </div>

                </form>
            </div>

            <div class="" style="display:none;" id="thankyou_message">
                <div class="thankyou_message btn-info">
                    <h4>Thank you for contacting us, we will get back to you soon</h4>
                    <br>
                    <br>
                    <br>
                </div>
            </div>




            <h2>Bring your shoes to the nearby local store</h2>
            <div class="border" id='map'></div>
            <style>
                .marker {
                    display: block;
                    border: none;
                    border-radius: 50%;
                    cursor: pointer;
                    padding: 0;
                }
            </style>

            <script>
                mapboxgl.accessToken =
                    'pk.eyJ1Ijoic2lsdmVyYmxhemUiLCJhIjoiY2poOHB0M2t4MDRmdzM2bXNodzJwYnljYSJ9.RsI4kCNnKwJNQQHtKH3HRw';

                var geojson = {
                    "type": "FeatureCollection",
                    "features": [{
                            "type": "Feature",
                            "properties": {
                                "message": "Foo",
                                "iconSize": [60, 60]
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [144.961726, -37.8149324]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "message": "Bar",
                                "iconSize": [50, 50]
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [144.961754, -37.834349]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "message": "Baz",
                                "iconSize": [40, 40]
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [144.961737, -37.813449]
                            }
                        }
                    ]
                };



                var map = new mapboxgl.Map({
                    container: 'map', // container id
                    style: 'mapbox://styles/mapbox/light-v9',
                    center: [144.9617, -37.8149], // starting position
                    zoom: 9 // starting zoom
                });


                // add markers to map
                geojson.features.forEach(function (marker) {
                    // create a DOM element for the marker
                    var el = document.createElement('div');
                    el.className = 'marker';
                    el.style.backgroundImage = 'url(https://placekitten.com/g/' + marker.properties.iconSize.join(
                        '/') + '/)';
                    el.style.width = marker.properties.iconSize[0] + 'px';
                    el.style.height = marker.properties.iconSize[1] + 'px';

                    el.addEventListener('click', function () {
                        window.alert(marker.properties.message);
                    });

                    // add marker to map
                    new mapboxgl.Marker(el)
                        .setLngLat(marker.geometry.coordinates)
                        .addTo(map);
                });

                var geolocate = new mapboxgl.GeolocateControl({
                    positionOptions: {
                        enableHighAccuracy: true
                    },
                    trackUserLocation: true
                })
                map.addControl(geolocate);

                // Add zoom and rotation controls to the map.
                map.addControl(new mapboxgl.NavigationControl());
            </script>
            <footer class="footer1">
                <div class="footer-copyright py-3 text-center">
                    © 2018 Copyright:
                    <a href="https://mdbootstrap.com/material-design-for-bootstrap/"> the-abacus.herokuapp.com </a>
                </div>
            </footer>
        </div>

</body>



</html>